<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="PACMAN.Views.GameView"
             Focusable="True"
             KeyDown="OnKeyDown">
    <Grid RowDefinitions="Auto,*" Margin="8">
        <Border Grid.Row="0"
                Background="#0B1220"
                Padding="12"
                BorderBrush="#334155"
                BorderThickness="0,0,0,1"
                CornerRadius="10,10,0,0">
            <Grid ColumnDefinitions="Auto,*,Auto" VerticalAlignment="Center">
                <Button Grid.Column="0" x:Name="BackToMenuButton" Content="Menú" Width="118" Height="34" Click="OnBackToMenuClick"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="20" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="LivesText" Text="Vidas: ●●●" Foreground="#FDE68A" FontSize="18" FontWeight="SemiBold" TextAlignment="Center"/>
                    <TextBlock x:Name="ScoreText" Text="Score: 0" Foreground="#FDE68A" FontSize="18" FontWeight="SemiBold" TextAlignment="Center"/>
                    <TextBlock x:Name="LevelText" Text="Nivel: 1" Foreground="#93C5FD" FontSize="18" FontWeight="SemiBold" TextAlignment="Center"/>
                    <TextBlock x:Name="ThemeText" Text="Tema: Aurora" Foreground="#A7F3D0" FontSize="18" FontWeight="SemiBold" TextAlignment="Center"/>
                </StackPanel>

                <Button Grid.Column="2" x:Name="RetryButton" Content="Reintentar" Width="118" Height="34" Click="OnRetryClick"/>
            </Grid>
        </Border>

        <Grid Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,14,0,6">
            <Border Width="624" Height="624" CornerRadius="14" BorderBrush="#334155" BorderThickness="2" Background="#020617" Padding="12">
                <Canvas x:Name="GameCanvas" Width="600" Height="600" Background="#0D1B2A">
                    <Image x:Name="PacmanOpen" Width="32" Height="32" Canvas.Left="40" Canvas.Top="140" Source="/Assets/Images/pacman1.png"/>
                    <Image x:Name="PacmanClosed" Width="32" Height="32" Canvas.Left="40" Canvas.Top="140" Source="/Assets/Images/pacman2.png" IsVisible="False"/>

                    <Image x:Name="RedGhost" Width="32" Height="32" Canvas.Left="300" Canvas.Top="300" Source="/Assets/Images/blinky.png"/>
                    <Image x:Name="BlueGhost" Width="32" Height="32" Canvas.Left="260" Canvas.Top="300" Source="/Assets/Images/inky.png"/>
                    <Image x:Name="PurpleGhost" Width="32" Height="32" Canvas.Left="320" Canvas.Top="260" Source="/Assets/Images/inky.png" IsVisible="False"/>
                    <Image x:Name="OrangeGhost" Width="32" Height="32" Canvas.Left="240" Canvas.Top="260" Source="/Assets/Images/blinky.png" IsVisible="False"/>
                    <Image x:Name="BossGhost" Width="58" Height="58" Canvas.Left="280" Canvas.Top="280" Source="/Assets/Images/blinky.png" IsVisible="False"/>
                </Canvas>
            </Border>

            <Border x:Name="StatusOverlay"
                    IsVisible="False"
                    Width="410"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Padding="24"
                    CornerRadius="12"
                    Background="#D90F172A"
                    BorderBrush="#E5E7EB"
                    BorderThickness="2"
                    ZIndex="20">
                <StackPanel Spacing="14" HorizontalAlignment="Center">
                    <TextBlock x:Name="StatusTitle" Text="Game Over" FontSize="34" FontWeight="Bold" Foreground="#F9FAFB" HorizontalAlignment="Center" TextAlignment="Center"/>
                    <TextBlock x:Name="StatusMessage" Text="Intenta nuevamente" FontSize="18" Foreground="#E5E7EB" HorizontalAlignment="Center" TextAlignment="Center"/>
                    <Button Content="Reintentar" Width="150" Height="34" HorizontalAlignment="Center" Click="OnRetryClick"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
